/* PARTÍCULAS GALÁCTICAS - CAMPO ESTELAR INFINITO */
:host {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 600vh;
  pointer-events: none;
  z-index: 15;
  overflow: hidden;
  
  /* PERFORMANCE: Optimizaciones base */
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  contain: layout style paint;
  isolation: isolate;
}

.particles-canvas {
  display: block !important;
  outline: none;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  background: transparent !important;
  
  /* CANVAS: Optimizaciones de rendering */
  image-rendering: optimizeSpeed;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: optimize-contrast;
  image-rendering: crisp-edges;
}

/* ESTADOS DINÁMICOS: Interacciones con otros componentes */
:host-context(.scrolling) {
  opacity: 0.6;
  transition: opacity 0.2s ease-out;
}

:host-context(.header-active) {
  opacity: 0.4;
  transition: opacity 0.15s ease-out;
}

:host-context(.cursor-targeting) {
  opacity: 0.5;
  transition: opacity 0.1s ease-out;
}

:host-context(.page-hidden) {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease-out;
}

/* RESPONSIVE: Optimizaciones por tamaño de pantalla */

/* TABLET LANDSCAPE (1024px y abajo) */
@media (max-width: 1024px) {
  :host {
    height: 550vh;
    opacity: 0.8;
  }
}

/* TABLET PORTRAIT (768px y abajo) */
@media (max-width: 768px) {
  :host {
    opacity: 0.7;
    transform: scale(0.95) translateZ(0);
    height: 500vh;
  }
}

/* MOBILE LANDSCAPE (640px y abajo) */
@media (max-width: 640px) {
  :host {
    opacity: 0.6;
    transform: scale(0.9) translateZ(0);
    height: 450vh;
  }
}

/* MOBILE PORTRAIT (480px y abajo) */
@media (max-width: 480px) {
  :host {
    opacity: 0.5;
    transform: scale(0.8) translateZ(0);
    height: 400vh;
  }
}

/* SMALL MOBILE (360px y abajo) */
@media (max-width: 360px) {
  :host {
    opacity: 0.4;
    transform: scale(0.7) translateZ(0);
    height: 350vh;
  }
}

/* PERFORMANCE: Dispositivos de baja potencia */
@media (max-width: 768px) and (max-height: 1024px) {
  :host {
    opacity: 0.4;
    transform: scale(0.7) translateZ(0);
    height: 300vh;
  }
}

/* PERFORMANCE: Dispositivos con alta densidad de píxeles */
@media (max-device-width: 768px) and (-webkit-min-device-pixel-ratio: 2) {
  :host {
    opacity: 0.3;
    transform: scale(0.6) translateZ(0);
    height: 280vh;
  }
}

/* PERFORMANCE: Pantallas de alta densidad generales */
@media (-webkit-min-device-pixel-ratio: 3), (min-resolution: 3dppx) {
  :host {
    opacity: 0.6;
    transform: scale(0.85) translateZ(0);
  }
}

/* ACCESIBILIDAD: Modo reducido de movimiento */
@media (prefers-reduced-motion: reduce) {
  :host {
    display: none !important;
  }
  
  .particles-canvas {
    animation: none !important;
    transform: none !important;
  }
}

/* ACCESIBILIDAD: Alto contraste */
@media (prefers-contrast: high) {
  :host {
    opacity: 0.2;
  }
}

/* PERFORMANCE: Datos reducidos */
@media (prefers-reduced-data: reduce) {
  :host {
    display: none !important;
  }
}

/* PERFORMANCE: Modo oscuro del sistema */
@media (prefers-color-scheme: dark) {
  :host {
    opacity: 0.8;
  }
}

/* PERFORMANCE: Modo claro del sistema */
@media (prefers-color-scheme: light) {
  :host {
    opacity: 0.6;
  }
}

/* ORIENTATION: Ajustes según orientación */
@media (orientation: landscape) and (max-height: 500px) {
  :host {
    height: 200vh;
    opacity: 0.3;
  }
}

/* WEBKIT/SAFARI: Optimizaciones específicas */
@supports (-webkit-appearance: none) {
  :host {
    /* WEBKIT: Propiedades específicas para Safari */
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 1000px;
    -webkit-transform-style: preserve-3d;
  }
  
  .particles-canvas {
    /* WEBKIT: Aceleración de hardware para canvas */
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
  }
}

/* FIREFOX: Optimizaciones específicas */
@supports (-moz-appearance: none) {
  :host {
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  
  .particles-canvas {
    image-rendering: -moz-crisp-edges;
  }
}

/* EDGE/IE: Compatibilidad */
@supports (-ms-ime-align: auto) {
  :host {
    transform: translateZ(0);
  }
}

/* MODERN BROWSERS: Optimizaciones avanzadas */
@supports (backdrop-filter: blur(1px)) {
  :host {
    backdrop-filter: blur(0px);
  }
}

/* GPU ACCELERATION: Para navegadores compatibles */
@supports (transform-style: preserve-3d) {
  :host {
    transform-style: preserve-3d;
  }
}

/* HOVER SUPPORT: Solo en dispositivos con hover */
@media (hover: hover) {
  :host-context(.cursor-targeting) {
    opacity: 0.7;
  }
}

/* NO HOVER: Dispositivos táctiles */
@media (hover: none) {
  :host {
    opacity: 0.6;
  }
}

/* FINE POINTER: Ratón preciso */
@media (pointer: fine) {
  :host-context(.header-active) {
    opacity: 0.5;
  }
}

/* COARSE POINTER: Touch/stylus */
@media (pointer: coarse) {
  :host {
    opacity: 0.5;
  }
}

/* PRINT: Ocultar en impresión */
@media print {
  :host {
    display: none !important;
  }
}
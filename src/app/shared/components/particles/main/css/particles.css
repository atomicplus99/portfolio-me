/* PARTÍCULAS COMO CAMPO ESTELAR INFINITO */
:host {
  display: block;
  position: absolute;  /* CORREGIDO: absolute para seguir el scroll */
  top: 0;
  left: 0;
  width: 100vw;
  height: 600vh;       /* CORREGIDO: cubrir todo el contenido como espacio */
  pointer-events: none;
  z-index: 15;
  overflow: hidden;
  
  /* PERFORMANCE: Optimizaciones para campo estelar */
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  contain: layout style paint;
}

.particles-canvas {
  display: block !important;
  outline: none;
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  background: transparent !important;
  
  /* PERFORMANCE: Optimizaciones de canvas */
  image-rendering: optimizeSpeed;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: optimize-contrast;
}

/* PERFORMANCE: Estados optimizados según scroll */
:host-context(.scrolling) {
  opacity: 0.6;
  transition: opacity 0.2s ease-out;
}

:host-context(.header-active) {
  opacity: 0.4;
  transition: opacity 0.15s ease-out;
}

:host-context(.cursor-targeting) {
  opacity: 0.5;
  transition: opacity 0.1s ease-out;
}

/* PERFORMANCE: Optimizaciones por dispositivo */
@media (max-width: 768px) {
  :host {
    opacity: 0.7; /* Menos opacidad en móviles */
    transform: scale(0.9); /* Escala ligeramente menor */
  }
}

@media (max-width: 480px) {
  :host {
    opacity: 0.5;
    transform: scale(0.8);
  }
}

/* PERFORMANCE: Dispositivos de baja potencia */
@media (max-width: 768px) and (max-height: 1024px) {
  :host {
    opacity: 0.4;
    transform: scale(0.7);
  }
}

/* PERFORMANCE: Reducir efectos en GPU limitada */
@media (max-device-width: 768px) and (-webkit-min-device-pixel-ratio: 2) {
  :host {
    opacity: 0.3;
    transform: scale(0.6);
  }
}

/* PERFORMANCE: Modo reducido de movimiento */
@media (prefers-reduced-motion: reduce) {
  :host {
    display: none !important;
  }
}

/* PERFORMANCE: Alto contraste */
@media (prefers-contrast: high) {
  :host {
    opacity: 0.2;
  }
}

/* PERFORMANCE: Datos reducidos */
@media (prefers-reduced-data: reduce) {
  :host {
    display: none !important;
  }
}

/* PERFORMANCE: Optimizaciones específicas para Safari */
@supports (-webkit-appearance: none) {
  :host {
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
  }
}
<app-galaxy *ngIf="isDesktop()" 
            class="fixed inset-0 z-[1] pointer-events-none transform-gpu"></app-galaxy>

<div class="portfolio-container">
  
  <!-- Loader optimizado -->
  <app-elegant-loader 
    [class.opacity-0]="!loaderService.state().isLoading"
    [class.invisible]="!loaderService.state().isLoading"
    [class.pointer-events-none]="!loaderService.state().isLoading"
    [logoText]="'@duque.dev'" 
    [subtitle]="'Bienvenido! :)'"
    class="fixed inset-0 z-[10000] transition-opacity duration-500 ease-out transform-gpu">
  </app-elegant-loader>
  
  <!-- Particles optimizadas -->
  <app-particles class="fixed inset-0 z-[5] pointer-events-none
                        opacity-40 md:opacity-45 lg:opacity-50
                        transition-opacity duration-300 transform-gpu scale-100"></app-particles>
  
  <!-- Header GARANTIZADO FIJO -->
  <app-header class="header-mobile-fixed"></app-header>
  
  <!-- Content wrapper con padding ajustado -->
  <div class="content-wrapper relative z-10 pt-16 lg:pt-0 transform-gpu
              transition-opacity duration-800 ease-out"
       [class.opacity-0]="loaderService.state().isLoading"
       [class.fade-in-content]="!loaderService.state().isLoading">
    
    <main class="main-content">
      
      <!-- HERO -->
      <section id="hero" class="section-hero min-h-screen flex items-center justify-center
                                relative w-full z-[15] transform-gpu
                                bg-slate-900/5 lg:bg-transparent">
        <app-hero></app-hero>
      </section>
      
      <!-- ABOUT -->
      <section id="about" class="section-item min-h-screen flex items-center justify-center
                                 relative w-full z-[15] transform-gpu
                                 bg-slate-900/5 lg:bg-transparent px-4 lg:px-0"
               style="animation-delay: 0.2s">
        
        <app-about *ngIf="loadedSections().about"></app-about>
        
        <div *ngIf="!loadedSections().about" 
             class="w-full max-w-4xl flex flex-col items-center gap-8">
          <div class="w-72 h-12 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
          <div class="w-full max-w-2xl flex flex-col gap-4">
            <div class="h-5 bg-slate-700/30 rounded w-full animate-pulse lg:animate-none"></div>
            <div class="h-5 bg-slate-700/30 rounded w-3/4 animate-pulse lg:animate-none"></div>
            <div class="h-5 bg-slate-700/30 rounded w-1/2 animate-pulse lg:animate-none"></div>
          </div>
        </div>
      </section>
      
      <!-- ABOUT-ME -->
      <section id="about-me" class="section-item min-h-screen flex items-center justify-center
                                   relative w-full z-[15] transform-gpu
                                   bg-slate-900/5 lg:bg-transparent px-4 lg:px-0"
               style="animation-delay: 0.4s">
        
        <app-about-me *ngIf="loadedSections().aboutMe"></app-about-me>
        
        <div *ngIf="!loadedSections().aboutMe" 
             class="w-full max-w-4xl flex flex-col items-center gap-8">
          <div class="w-32 h-32 bg-slate-700/30 rounded-full animate-pulse lg:animate-none"></div>
          <div class="w-full max-w-2xl flex flex-col gap-4">
            <div class="h-5 bg-slate-700/30 rounded w-full animate-pulse lg:animate-none"></div>
            <div class="h-5 bg-slate-700/30 rounded w-2/3 animate-pulse lg:animate-none"></div>
            <div class="h-5 bg-slate-700/30 rounded w-3/4 animate-pulse lg:animate-none"></div>
          </div>
        </div>
      </section>
      
      <!-- PROJECTS con tamaÃ±o ajustado -->
      <section id="projects" class="section-item projects-section 
                                   min-h-screen flex items-center justify-center
                                   relative w-full z-[15]
                                   bg-slate-900/5 lg:bg-transparent px-4 lg:px-0"
               style="animation-delay: 0.6s">
        
        <app-projects *ngIf="loadedSections().projects"></app-projects>
        
        <div *ngIf="!loadedSections().projects" 
             class="w-full max-w-6xl flex flex-col items-center gap-12">
          <div class="w-72 h-12 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full">
            <div class="h-64 bg-slate-700/30 rounded-xl animate-pulse lg:animate-none"></div>
            <div class="h-64 bg-slate-700/30 rounded-xl animate-pulse lg:animate-none"></div>
            <div class="h-64 bg-slate-700/30 rounded-xl animate-pulse lg:animate-none"></div>
          </div>
        </div>
      </section>
      
      <!-- SKILLS -->
      <section id="skills" class="section-item min-h-screen flex items-center justify-center
                                 relative w-full z-[15] transform-gpu
                                 bg-slate-900/5 lg:bg-transparent px-4 lg:px-0"
               style="animation-delay: 0.8s">
        
        <app-skills *ngIf="loadedSections().skills"></app-skills>
        
        <div *ngIf="!loadedSections().skills" 
             class="w-full max-w-4xl flex flex-col items-center gap-8">
          <div class="w-72 h-12 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 w-full">
            <div class="h-20 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
            <div class="h-20 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
            <div class="h-20 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
            <div class="h-20 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
          </div>
        </div>
      </section>
      
      <!-- CONTACT -->
      <section id="contact" class="section-item min-h-screen flex items-center justify-center
                                  relative w-full z-[15] transform-gpu
                                  bg-slate-900/5 lg:bg-transparent px-4 lg:px-0"
               style="animation-delay: 1s">
        
        <app-contact *ngIf="loadedSections().contact"></app-contact>
        
        <div *ngIf="!loadedSections().contact" 
             class="w-full max-w-2xl flex flex-col items-center gap-8">
          <div class="w-72 h-12 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
          <div class="w-full flex flex-col gap-6">
            <div class="h-12 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
            <div class="h-12 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
            <div class="h-32 bg-slate-700/30 rounded-lg animate-pulse lg:animate-none"></div>
            <div class="h-12 w-32 bg-slate-700/30 rounded-lg mx-auto animate-pulse lg:animate-none"></div>
          </div>
        </div>
      </section>
      
      <div class="section-divider" *ngIf="loadedSections().footer"></div>
      
      <!-- FOOTER -->
      <app-footer *ngIf="loadedSections().footer" 
                  class="footer-section section-item"
                  style="animation-delay: 1.2s"></app-footer>
      
      <div *ngIf="!loadedSections().footer" 
           class="p-8 flex justify-center section-item"
           style="animation-delay: 1.2s">
        <div class="flex flex-col gap-4 items-center">
          <div class="w-48 h-5 bg-slate-700/30 rounded animate-pulse lg:animate-none"></div>
          <div class="w-32 h-5 bg-slate-700/30 rounded animate-pulse lg:animate-none"></div>
        </div>
      </div>
      
    </main>
  </div>
</div>